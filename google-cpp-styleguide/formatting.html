

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8. 格式 &mdash; Google 開源項目風格指南</title>
    
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/theme_extras.js"></script>
    <link rel="top" title="Google 開源項目風格指南" href="../index.html" />
    <link rel="up" title="C++ 風格指南 - 內容目錄" href="contents.html" />
    <link rel="next" title="9. 規則特例" href="exceptions.html" />
    <link rel="prev" title="7. 註釋" href="comments.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="../index.html">
          <span>Google 開源項目風格指南</span></a></h1>
        <h2 class="heading"><span>8. 格式</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="comments.html">7. 註釋</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../contents.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="exceptions.html">9. 規則特例</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="id1">
<h1>8. 格式</h1>
<p>代碼風格和格式確實比較隨意, 但一個項目中所有人遵循同一風格是非常容易的. 個體未必同意下述每一處格式規則, 但整個項目服從統一的編程風格是很重要的, 只有這樣才能讓所有人能很輕鬆的閲讀和理解代碼.</p>
<p>另外, 我們寫了一個 <a class="reference external" href="http://google-styleguide.googlecode.com/svn/trunk/google-c-style.el">emacs 配置檔案</a> 來幫助你正確的格式化代碼.</p>
<div class="section" id="line-length">
<span id="id2"></span><h2>8.1. 行長度</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">每一行代碼字元數不超過 80.</p>
</div>
<p>我們也認識到這條規則是有爭議的, 但很多已有代碼都已經遵照這一規則, 我們感覺一致性更重要.</p>
<dl class="docutils">
<dt>優點:</dt>
<dd>提倡該原則的人主張強迫他們調整編輯器窗口大小很野蠻. 很多人同時並排開幾個代碼窗口, 根本沒有多餘空間拉伸窗口. 大家都把窗口最大尺寸加以限定, 並且 80 列寬是傳統標準. 為什麼要改變呢?</dd>
<dt>缺點:</dt>
<dd>反對該原則的人則認為更寬的代碼行更易閲讀. 80 列的限制是上個世紀 60 年代的大型機的古板缺陷; 現代設備具有更寬的顯示屏, 很輕鬆的可以顯示更多代碼.</dd>
<dt>結論:</dt>
<dd><p class="first">80 個字元是最大值.</p>
<p>特例:</p>
<ul class="last simple">
<li>如果一行註釋包含了超過 80 字元的命令或 URL, 出於複製粘貼的方便允許該行超過 80 字元.</li>
<li>包含長路徑的 <tt class="docutils literal"><span class="pre">#include</span></tt> 語句可以超出80列. 但應該儘量避免.</li>
<li><a class="reference internal" href="headers.html#define-guard"><em>標頭檔保護</em></a> 可以無視該原則.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="ascii">
<h2>8.2. 非 ASCII 字元</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">儘量不使用非 ASCII 字元, 使用時必須使用 UTF-8 編碼.</p>
</div>
<p>即使是英文, 也不應將用戶界面的文本硬編碼到原始碼中, 因此非 ASCII 字元要少用. 特殊情況下可以適當包含此類字元. 如, 代碼分析外部數據檔案時, 可以適當硬編碼數據檔案中作為分隔符的非 ASCII 字元串; 更常見的是 (不需要本地化的) 單元測試代碼可能包含非 ASCII 字元串. 此類情況下, 應使用 UTF-8 編碼, 因為很多工具都可以理解和處理 UTF-8 編碼. 十六進制編碼也可以, 能增強可讀性的情況下尤其鼓勵 —— 比如 <tt class="docutils literal"><span class="pre">&quot;\xEF\xBB\xBF&quot;</span></tt> 在 Unicode 中是 <em>零寬度 無間斷</em> 的間隔符號, 如果不用十六進制直接放在 UTF-8 格式的源檔案中, 是看不到的. (yospaly 註: <tt class="docutils literal"><span class="pre">&quot;\xEF\xBB\xBF&quot;</span></tt> 通常用作 UTF-8 with BOM 編碼標記)</p>
</div>
<div class="section" id="id3">
<h2>8.3. 空格還是製表位</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">只使用空格, 每次縮進 2 個空格.</p>
</div>
<p>我們使用空格縮進. 不要在代碼中使用制符表. 你應該設置編輯器將制符表轉為空格.</p>
</div>
<div class="section" id="id4">
<h2>8.4. 函數聲明與定義</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">返回類型和函數名在同一行, 參數也儘量放在同一行.</p>
</div>
<dl class="docutils">
<dt>函數看上去像這樣:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">ReturnType</span> <span class="n">ClassName</span><span class="o">::</span><span class="n">FunctionName</span><span class="p">(</span><span class="n">Type</span> <span class="n">par_name1</span><span class="p">,</span> <span class="n">Type</span> <span class="n">par_name2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">DoSomething</span><span class="p">();</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>如果同一行文本太多, 放不下所有參數:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">ReturnType</span> <span class="n">ClassName</span><span class="o">::</span><span class="n">ReallyLongFunctionName</span><span class="p">(</span><span class="n">Type</span> <span class="n">par_name1</span><span class="p">,</span>
                                             <span class="n">Type</span> <span class="n">par_name2</span><span class="p">,</span>
                                             <span class="n">Type</span> <span class="n">par_name3</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">DoSomething</span><span class="p">();</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>甚至連第一個參數都放不下:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">ReturnType</span> <span class="n">LongClassName</span><span class="o">::</span><span class="n">ReallyReallyReallyLongFunctionName</span><span class="p">(</span>
        <span class="n">Type</span> <span class="n">par_name1</span><span class="p">,</span>  <span class="c1">// 4 space indent</span>
        <span class="n">Type</span> <span class="n">par_name2</span><span class="p">,</span>
        <span class="n">Type</span> <span class="n">par_name3</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">DoSomething</span><span class="p">();</span>  <span class="c1">// 2 space indent</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p>注意以下幾點:</p>
<blockquote>
<div><ul class="simple">
<li>返回值總是和函數名在同一行;</li>
<li>左圓括號總是和函數名在同一行;</li>
<li>函數名和左圓括號間沒有空格;</li>
<li>圓括號與參數間沒有空格;</li>
<li>左大括號總在最後一個參數同一行的末尾處;</li>
<li>右大括號總是單獨位於函數最後一行;</li>
<li>右圓括號和左大括號間總是有一個空格;</li>
<li>函數聲明和實現處的所有形參名稱必須保持一致;</li>
<li>所有形參應儘可能對齊;</li>
<li>預設縮進為 2 個空格;</li>
<li>換行後的參數保持 4 個空格的縮進;</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>如果函數聲明成 <tt class="docutils literal"><span class="pre">const</span></tt>, 關鍵字 <tt class="docutils literal"><span class="pre">const</span></tt> 應與最後一個參數位于同一行:=</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="c1">// Everything in this function signature fits on a single line</span>
<span class="n">ReturnType</span> <span class="n">FunctionName</span><span class="p">(</span><span class="n">Type</span> <span class="n">par</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="c1">// This function signature requires multiple lines, but</span>
<span class="c1">// the const keyword is on the line with the last parameter.</span>
<span class="n">ReturnType</span> <span class="n">ReallyLongFunctionName</span><span class="p">(</span><span class="n">Type</span> <span class="n">par1</span><span class="p">,</span>
                                  <span class="n">Type</span> <span class="n">par2</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>如果有些參數沒有用到, 在函數定義處將參數名註釋起來:</dt>
<dd><div class="first highlight-c++"><div class="highlight"><pre><span class="c1">// Always have named parameters in interfaces.</span>
<span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Rotate</span><span class="p">(</span><span class="kt">double</span> <span class="n">radians</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Always have named parameters in the declaration.</span>
<span class="k">class</span> <span class="nc">Circle</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Shape</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Rotate</span><span class="p">(</span><span class="kt">double</span> <span class="n">radians</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Comment out unused named parameters in definitions.</span>
<span class="kt">void</span> <span class="n">Circle</span><span class="o">::</span><span class="n">Rotate</span><span class="p">(</span><span class="kt">double</span> <span class="cm">/*radians*/</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="c1">// Bad - if someone wants to implement later, it&#39;s not clear what the</span>
<span class="c1">// variable means.</span>
<span class="kt">void</span> <span class="n">Circle</span><span class="o">::</span><span class="n">Rotate</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id5">
<h2>8.5. 函數調用</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">儘量放在同一行, 否則, 將實參封裝在圓括號中.</p>
</div>
<dl class="docutils">
<dt>函數調用遵循如下形式:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="kt">bool</span> <span class="n">retval</span> <span class="o">=</span> <span class="n">DoSomething</span><span class="p">(</span><span class="n">argument1</span><span class="p">,</span> <span class="n">argument2</span><span class="p">,</span> <span class="n">argument3</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt>如果同一行放不下, 可斷為多行, 後面每一行都和第一個實參對齊, 左圓括號後和右圓括號前不要留空格:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="kt">bool</span> <span class="n">retval</span> <span class="o">=</span> <span class="n">DoSomething</span><span class="p">(</span><span class="n">averyveryveryverylongargument1</span><span class="p">,</span>
                          <span class="n">argument2</span><span class="p">,</span> <span class="n">argument3</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt>如果函數參數很多, 出於可讀性的考慮可以在每行只放一個參數:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="kt">bool</span> <span class="n">retval</span> <span class="o">=</span> <span class="n">DoSomething</span><span class="p">(</span><span class="n">argument1</span><span class="p">,</span>
                          <span class="n">argument2</span><span class="p">,</span>
                          <span class="n">argument3</span><span class="p">,</span>
                          <span class="n">argument4</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt>如果函數名非常長, 以至于超過 <a class="reference internal" href="#line-length"><em>行最大長度</em></a>, 可以將所有參數獨立成行:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(...)</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="p">...</span>
  <span class="k">if</span> <span class="p">(...)</span> <span class="p">{</span>
    <span class="n">DoSomethingThatRequiresALongFunctionName</span><span class="p">(</span>
        <span class="n">very_long_argument1</span><span class="p">,</span>  <span class="c1">// 4 space indent</span>
        <span class="n">argument2</span><span class="p">,</span>
        <span class="n">argument3</span><span class="p">,</span>
        <span class="n">argument4</span><span class="p">);</span>
  <span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id6">
<h2>8.6. 條件語句</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">傾向于不在圓括號內使用空格. 關鍵字 <tt class="docutils literal"><span class="pre">else</span></tt> 另起一行.</p>
</div>
<p>對基本條件語句有兩種可以接受的格式. 一種在圓括號和條件之間有空格, 另一種沒有.</p>
<dl class="docutils">
<dt>最常見的是沒有空格的格式. 哪種都可以, 但 <em>保持一致性</em>. 如果你是在修改一個檔案, 參考當前已有格式. 如果是寫新的代碼, 參考目錄下或項目中其它檔案. 還在徘徊的話, 就不要加空格了.</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// no spaces inside parentheses</span>
  <span class="p">...</span>  <span class="c1">// 2 space indent.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  <span class="c1">// The else goes on the same line as the closing brace.</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>如果你更喜歡在圓括號內部加空格:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="n">condition</span> <span class="p">)</span> <span class="p">{</span>  <span class="c1">// spaces inside parentheses - rare</span>
  <span class="p">...</span>  <span class="c1">// 2 space indent.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  <span class="c1">// The else goes on the same line as the closing brace.</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>注意所有情況下 <tt class="docutils literal"><span class="pre">if</span></tt> 和左圓括號間都有個空格. 右圓括號和左大括號之間也要有個空格:</dt>
<dd><div class="first admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>     <span class="c1">// Bad - space missing after IF.</span>
<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">){</span>   <span class="c1">// Bad - space missing before {.</span>
<span class="k">if</span><span class="p">(</span><span class="n">condition</span><span class="p">){</span>    <span class="c1">// Doubly bad.</span>
</pre></div>
</div>
</div>
<div class="last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// Good - proper space after IF and before {.</span>
</pre></div>
</div>
</dd>
<dt>如果能增強可讀性, 簡短的條件語句允許寫在同一行. 只有當語句簡單並且沒有使用 <tt class="docutils literal"><span class="pre">else</span></tt> 子句時使用:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">kFoo</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">Foo</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">kBar</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="n">Bar</span><span class="p">();</span>
</pre></div>
</div>
</dd>
<dt>如果語句有 <tt class="docutils literal"><span class="pre">else</span></tt> 分支則不允許:</dt>
<dd><div class="first last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="c1">// Not allowed - IF statement on one line when there is an ELSE clause</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">DoThis</span><span class="p">();</span>
<span class="k">else</span> <span class="n">DoThat</span><span class="p">();</span>
</pre></div>
</div>
</div>
</dd>
<dt>通常, 單行語句不需要使用大括號, 如果你喜歡用也沒問題; 複雜的條件或循環語句用大括號可讀性會更好. 也有一些項目要求 <tt class="docutils literal"><span class="pre">if</span></tt> 必須總是使用大括號:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span>
  <span class="n">DoSomething</span><span class="p">();</span>  <span class="c1">// 2 space indent.</span>

<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">DoSomething</span><span class="p">();</span>  <span class="c1">// 2 space indent.</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>但如果語句中某個 <tt class="docutils literal"><span class="pre">if-else</span></tt> 分支使用了大括號的話, 其它分支也必須使用:</dt>
<dd><div class="first admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="c1">// Not allowed - curly on IF but not ELSE</span>
<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">foo</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span>
    <span class="n">bar</span><span class="p">;</span>

<span class="c1">// Not allowed - curly on ELSE but not IF</span>
<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span>
    <span class="n">foo</span><span class="p">;</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="n">bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="last highlight-c++"><div class="highlight"><pre><span class="c1">// Curly braces around both IF and ELSE required because</span>
<span class="c1">// one of the clauses used braces.</span>
<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id7">
<h2>8.7. 循環和開關選擇語句</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"><tt class="docutils literal"><span class="pre">switch</span></tt> 語句可以使用大括號分段. 空循環體應使用 <tt class="docutils literal"><span class="pre">{}</span></tt> 或 <tt class="docutils literal"><span class="pre">continue</span></tt>.</p>
</div>
<p><tt class="docutils literal"><span class="pre">switch</span></tt> 語句中的 <tt class="docutils literal"><span class="pre">case</span></tt> 塊可以使用大括號也可以不用, 取決於你的個人喜好. 如果用的話, 要按照下文所述的方法.</p>
<dl class="docutils">
<dt>如果有不滿足 <tt class="docutils literal"><span class="pre">case</span></tt> 條件的枚舉值, <tt class="docutils literal"><span class="pre">switch</span></tt> 應該總是包含一個 <tt class="docutils literal"><span class="pre">default</span></tt> 匹配 (如果有輸入值沒有 case 去處理, 編譯器將報警). 如果 <tt class="docutils literal"><span class="pre">default</span></tt> 應該永遠執行不到, 簡單的加條 <tt class="docutils literal"><span class="pre">assert</span></tt>:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">switch</span> <span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="p">{</span>  <span class="c1">// 2 space indent</span>
    <span class="p">...</span>      <span class="c1">// 4 space indent</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">default</span><span class="o">:</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>空循環體應使用 <tt class="docutils literal"><span class="pre">{}</span></tt> 或 <tt class="docutils literal"><span class="pre">continue</span></tt>, 而不是一個簡單的分號.</dt>
<dd><div class="first highlight-c++"><div class="highlight"><pre><span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Repeat test until it returns false.</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">kSomeNumber</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{}</span>  <span class="c1">// Good - empty body.</span>
<span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>  <span class="c1">// Good - continue indicates no logic.</span>
</pre></div>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">);</span>  <span class="c1">// Bad - looks like part of do/while loop.</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id8">
<h2>8.8. 指針和引用表達式</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">句點或箭頭前後不要有空格. 指針/地址操作符 (<tt class="docutils literal"><span class="pre">*,</span> <span class="pre">&amp;</span></tt>) 之後不能有空格.</p>
</div>
<dl class="docutils">
<dt>下面是指針和引用表達式的正確使用範例:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt>注意:</dt>
<dd><ul class="first last simple">
<li>在訪問成員時, 句點或箭頭前後沒有空格.</li>
<li>指針操作符 <tt class="docutils literal"><span class="pre">*</span></tt> 或 <tt class="docutils literal"><span class="pre">&amp;</span></tt> 後沒有空格.</li>
</ul>
</dd>
<dt>在聲明指針變數或參數時, 星號與類型或變數名緊挨都可以:</dt>
<dd><div class="first highlight-c++"><div class="highlight"><pre><span class="c1">// These are fine, space preceding.</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">c</span><span class="p">;</span>
<span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">str</span><span class="p">;</span>

<span class="c1">// These are fine, space following.</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">c</span><span class="p">;</span>    <span class="c1">// but remember to do &quot;char* c, *d, *e, ...;&quot;!</span>
<span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">str</span><span class="p">;</span>
</pre></div>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="kt">char</span> <span class="o">*</span> <span class="n">c</span><span class="p">;</span>  <span class="c1">// Bad - spaces on both sides of *</span>
<span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span> <span class="n">str</span><span class="p">;</span>  <span class="c1">// Bad - spaces on both sides of &amp;</span>
</pre></div>
</div>
</div>
</dd>
</dl>
<p>在單個檔案內要保持風格一致, 所以, 如果是修改現有檔案, 要遵照該檔案的風格.</p>
</div>
<div class="section" id="id9">
<h2>8.9. 布爾表達式</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">如果一個布爾表達式超過 <a class="reference internal" href="#line-length"><em>標準行寬</em></a>, 斷行方式要統一一下.</p>
</div>
<dl class="docutils">
<dt>下例中, 邏輯與 (<tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt>) 操作符總位於行尾:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">this_one_thing</span> <span class="o">&gt;</span> <span class="n">this_other_thing</span> <span class="o">&amp;&amp;</span>
    <span class="n">a_third_thing</span> <span class="o">==</span> <span class="n">a_fourth_thing</span> <span class="o">&amp;&amp;</span>
    <span class="n">yet_another</span> <span class="o">&amp;</span> <span class="n">last_one</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p>注意, 上例的邏輯與 (<tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt>) 操作符均位於行尾. 可以考慮額外插入圓括號, 合理使用的話對增強可讀性是很有幫助的.</p>
</div>
<div class="section" id="id10">
<h2>8.10. 函數返回值</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last"><tt class="docutils literal"><span class="pre">return</span></tt> 表達式中不要用圓括號包圍.</p>
</div>
<dl class="docutils">
<dt>函數返回時不要使用圓括號:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">return</span> <span class="n">x</span><span class="p">;</span>  <span class="c1">// not return(x);</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id11">
<h2>8.11. 變數及數組初始化</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">用 <tt class="docutils literal"><span class="pre">=</span></tt> 或 <tt class="docutils literal"><span class="pre">()</span></tt> 均可.</p>
</div>
<dl class="docutils">
<dt>在二者中做出選擇; 下面的方式都是正確的:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">x</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">string</span> <span class="n">name</span><span class="p">(</span><span class="s">&quot;Some Name&quot;</span><span class="p">);</span>
<span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Some Name&quot;</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id12">
<h2>8.12. 預處理指令</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">預處理指令不要縮進, 從行首開始.</p>
</div>
<dl class="docutils">
<dt>即使預處理指令位於縮進代碼塊中, 指令也應從行首開始.</dt>
<dd><div class="first highlight-c++"><div class="highlight"><pre><span class="c1">// Good - directives at beginning of line</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">lopsided_score</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">#if DISASTER_PENDING      </span><span class="c1">// Correct -- Starts at beginning of line</span>
    <span class="n">DropEverything</span><span class="p">();</span>
<span class="cp">#endif</span>
    <span class="n">BackToNormal</span><span class="p">();</span>
  <span class="p">}</span>
</pre></div>
</div>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="c1">// Bad - indented directives</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">lopsided_score</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">    #if DISASTER_PENDING  </span><span class="c1">// Wrong!  The &quot;#if&quot; should be at beginning of line</span>
    <span class="n">DropEverything</span><span class="p">();</span>
<span class="cp">    #endif                </span><span class="c1">// Wrong!  Do not indent &quot;#endif&quot;</span>
    <span class="n">BackToNormal</span><span class="p">();</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id13">
<h2>8.13. 類格式</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">訪問控制塊的聲明依次序是 <tt class="docutils literal"><span class="pre">public:</span></tt>, <tt class="docutils literal"><span class="pre">protected:</span></tt>, <tt class="docutils literal"><span class="pre">private:</span></tt>, 每次縮進 1 個空格.</p>
</div>
<dl class="docutils">
<dt>類聲明 (對類註釋不瞭解的話, 參考 <a class="reference internal" href="comments.html#class-comments"><em>類註釋</em></a>) 的基本格式如下:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyClass</span> <span class="o">:</span> <span class="k">public</span> <span class="n">OtherClass</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>      <span class="c1">// Note the 1 space indent!</span>
  <span class="n">MyClass</span><span class="p">();</span>  <span class="c1">// Regular 2 space indent.</span>
  <span class="k">explicit</span> <span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">var</span><span class="p">);</span>
  <span class="o">~</span><span class="n">MyClass</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kt">void</span> <span class="n">SomeFunction</span><span class="p">();</span>
  <span class="kt">void</span> <span class="n">SomeFunctionThatDoesNothing</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">set_some_var</span><span class="p">(</span><span class="kt">int</span> <span class="n">var</span><span class="p">)</span> <span class="p">{</span> <span class="n">some_var_</span> <span class="o">=</span> <span class="n">var</span><span class="p">;</span> <span class="p">}</span>
  <span class="kt">int</span> <span class="n">some_var</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">some_var_</span><span class="p">;</span> <span class="p">}</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="kt">bool</span> <span class="n">SomeInternalFunction</span><span class="p">();</span>

  <span class="kt">int</span> <span class="n">some_var_</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">some_other_var_</span><span class="p">;</span>
  <span class="n">DISALLOW_COPY_AND_ASSIGN</span><span class="p">(</span><span class="n">MyClass</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</dd>
<dt>注意事項:</dt>
<dd><ul class="first last simple">
<li>所有基類名應在 80 列限制下儘量與子類名放在同一行.</li>
<li>關鍵詞 <tt class="docutils literal"><span class="pre">public:</span></tt>, <tt class="docutils literal"><span class="pre">protected:</span></tt>, <tt class="docutils literal"><span class="pre">private:</span></tt> 要縮進 1 個空格.</li>
<li>除第一個關鍵詞 (一般是 <tt class="docutils literal"><span class="pre">public</span></tt>) 外, 其他關鍵詞前要空一行. 如果類比較小的話也可以不空.</li>
<li>這些關鍵詞後不要保留空行.</li>
<li><tt class="docutils literal"><span class="pre">public</span></tt> 放在最前面, 然後是 <tt class="docutils literal"><span class="pre">protected</span></tt>, 最後是 <tt class="docutils literal"><span class="pre">private</span></tt>.</li>
<li>關於聲明順序的規則請參考 <a class="reference internal" href="classes.html#declaration-order"><em>聲明順序</em></a> 一節.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="id14">
<h2>8.14. 初始化列表</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">建構子初始化列表放在同一行或按四格縮進並排幾行.</p>
</div>
<p>下面兩種初始化列表方式都可以接受:</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="c1">// When it all fits on one line:</span>
<span class="n">MyClass</span><span class="o">::</span><span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">var</span><span class="p">)</span> <span class="o">:</span> <span class="n">some_var_</span><span class="p">(</span><span class="n">var</span><span class="p">),</span> <span class="n">some_other_var_</span><span class="p">(</span><span class="n">var</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</pre></div>
</div>
</div></blockquote>
<p>或</p>
<blockquote>
<div><div class="highlight-c++"><div class="highlight"><pre><span class="c1">// When it requires multiple lines, indent 4 spaces, putting the colon on</span>
<span class="c1">// the first initializer line:</span>
<span class="n">MyClass</span><span class="o">::</span><span class="n">MyClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">var</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">some_var_</span><span class="p">(</span><span class="n">var</span><span class="p">),</span>             <span class="c1">// 4 space indent</span>
      <span class="n">some_other_var_</span><span class="p">(</span><span class="n">var</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// lined up</span>
  <span class="p">...</span>
  <span class="n">DoSomething</span><span class="p">();</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id15">
<h2>8.15. 名字空間格式化</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">名字空間內容不縮進.</p>
</div>
<dl class="docutils">
<dt><a class="reference internal" href="scoping.html#namespaces"><em>名字空間</em></a> 不要增加額外的縮進層次, 例如:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">namespace</span> <span class="p">{</span>

<span class="kt">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{</span>  <span class="c1">// Correct.  No extra indentation within namespace.</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace</span>
</pre></div>
</div>
</dd>
<dt>不要縮進名字空間:</dt>
<dd><div class="first last admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="k">namespace</span> <span class="p">{</span>

  <span class="c1">// Wrong.  Indented when it should not be.</span>
  <span class="kt">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace</span>
</pre></div>
</div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id16">
<h2>8.16. 水平留白</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">水平留白的使用因地制宜. 永遠不要在行尾添加沒意義的留白.</p>
</div>
<dl class="docutils">
<dt>常規:</dt>
<dd><div class="first highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="kt">bool</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// Open braces should always have a space before them.</span>
  <span class="p">...</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// Semicolons usually have no space before them.</span>
<span class="kt">int</span> <span class="n">x</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>  <span class="c1">// Spaces inside braces for array initialization are</span>
<span class="kt">int</span> <span class="n">x</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>    <span class="c1">// optional.  If you use them, put them on both sides!</span>
<span class="c1">// Spaces around the colon in inheritance and initializer lists.</span>
<span class="k">class</span> <span class="nc">Foo</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Bar</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
  <span class="c1">// For inline function implementations, put spaces between the braces</span>
  <span class="c1">// and the implementation itself.</span>
  <span class="n">Foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="o">:</span> <span class="n">Bar</span><span class="p">(),</span> <span class="n">baz_</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{}</span>  <span class="c1">// No spaces inside empty braces.</span>
  <span class="kt">void</span> <span class="n">Reset</span><span class="p">()</span> <span class="p">{</span> <span class="n">baz_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// Spaces separating braces from implementation.</span>
  <span class="p">...</span>
</pre></div>
</div>
<p class="last">添加冗餘的留白會給其他人編輯時造成額外負擔. 因此, 行尾不要留空格. 如果確定一行代碼已經修改完畢, 將多餘的空格去掉; 或者在專門清理空格時去掉（確信沒有其他人在處理). (yospaly 註: 現在大部分代碼編輯器稍加設置後, 都支持自動刪除行首/行尾空格, 如果不支持, 考慮換一款編輯器或 IDE)</p>
</dd>
<dt>循環和條件語句:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>          <span class="c1">// Space after the keyword in conditions and loops.</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>          <span class="c1">// Spaces around else.</span>
<span class="p">}</span>
<span class="k">while</span> <span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="p">{}</span>   <span class="c1">// There is usually no space inside parentheses.</span>
<span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
<span class="k">switch</span> <span class="p">(</span> <span class="n">i</span> <span class="p">)</span> <span class="p">{</span>    <span class="c1">// Loops and conditions may have spaces inside</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">test</span> <span class="p">)</span> <span class="p">{</span>     <span class="c1">// parentheses, but this is rare.  Be consistent.</span>
<span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="p">{</span>
<span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// For loops always have a space after the</span>
  <span class="p">...</span>                   <span class="c1">// semicolon, and may have a space before the</span>
                        <span class="c1">// semicolon.</span>
<span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>         <span class="c1">// No space before colon in a switch case.</span>
    <span class="p">...</span>
  <span class="k">case</span> <span class="mi">2</span><span class="o">:</span> <span class="k">break</span><span class="p">;</span>  <span class="c1">// Use a space after a colon if there&#39;s code after it.</span>
</pre></div>
</div>
</dd>
<dt>操作符:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>              <span class="c1">// Assignment operators always have spaces around</span>
                    <span class="c1">// them.</span>
<span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span><span class="p">;</span>             <span class="c1">// No spaces separating unary operators and their</span>
<span class="o">++</span><span class="n">x</span><span class="p">;</span>                <span class="c1">// arguments.</span>
<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">y</span><span class="p">)</span>
  <span class="p">...</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">/</span> <span class="n">z</span><span class="p">;</span>  <span class="c1">// Binary operators usually have spaces around them,</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">w</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">/</span><span class="n">z</span><span class="p">;</span>      <span class="c1">// but it&#39;s okay to remove spaces around factors.</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">z</span><span class="p">);</span>    <span class="c1">// Parentheses should have no spaces inside them.</span>
</pre></div>
</div>
</dd>
<dt>模板和轉換:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">;</span>           <span class="c1">// No spaces inside the angle</span>
<span class="n">y</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>  <span class="c1">// brackets (&lt; and &gt;), before</span>
                            <span class="c1">// &lt;, or between &gt;( in a cast.</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span> <span class="o">*&gt;</span> <span class="n">x</span><span class="p">;</span>           <span class="c1">// Spaces between type and pointer are</span>
                            <span class="c1">// okay, but be consistent.</span>
<span class="n">set</span><span class="o">&lt;</span><span class="n">list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">;</span>       <span class="c1">// C++ requires a space in &gt; &gt;.</span>
<span class="n">set</span><span class="o">&lt;</span> <span class="n">list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">;</span>      <span class="c1">// You may optionally make use</span>
                            <span class="c1">// symmetric spacing in &lt; &lt;.</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id17">
<h2>8.17. 垂直留白</h2>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">垂直留白越少越好.</p>
</div>
<p>這不僅僅是規則而是原則問題了: 不在萬不得已, 不要使用空行. 尤其是: 兩個函數定義之間的空行不要超過 2 行, 函數體首尾不要留空行, 函數體中也不要隨意添加空行.</p>
<p>基本原則是: 同一屏可以顯示的代碼越多, 越容易理解程序的控制流. 當然, 過于密集的代碼塊和過于疏鬆的代碼塊同樣難看, 取決於你的判斷. 但通常是垂直留白越少越好.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>函數首尾不要有空行</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">Function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Unnecessary blank lines before and after</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>代碼塊首尾不要有空行</p>
<div class="last highlight-c++"><div class="highlight"><pre><span class="k">while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Unnecessary blank line after</span>

<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Unnecessary blank line before</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">if-else</span></tt> 塊之間空一行是可以接受的:</dt>
<dd><div class="first last highlight-c++"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Some lines of code too small to move to another function,</span>
  <span class="c1">// followed by a blank line.</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// Another block of code</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="yulefox">
<h2>譯者 (YuleFox) 筆記</h2>
<ol class="arabic simple" start="0">
<li>對於代碼格式, 因人, 系統而異各有優缺點, 但同一個項目中遵循同一標準還是有必要的;</li>
<li>行寬原則上不超過 80 列, 把 22 寸的顯示屏都占完, 怎麼也說不過去;</li>
<li>儘量不使用非 ASCII 字元, 如果使用的話, 參考 UTF-8 格式 (尤其是 UNIX/Linux 下, Windows 下可以考慮寬字元), 儘量不將字元串常量耦合到代碼中, 比如獨立出資源檔案, 這不僅僅是風格問題了;</li>
<li>UNIX/Linux 下無條件使用空格, MSVC 的話使用 Tab 也無可厚非;</li>
<li>函數參數, 邏輯條件, 初始化列表: 要麼所有參數和函數名放在同一行, 要麼所有參數並排分行;</li>
<li>除函數定義的左大括號可以置於行首外, 包括函數/類/結構體/枚舉聲明, 各種語句的左大括號置於行尾, 所有右大括號獨立成行;</li>
<li><tt class="docutils literal"><span class="pre">.</span></tt>/<tt class="docutils literal"><span class="pre">-&gt;</span></tt> 操作符前後不留空格, <tt class="docutils literal"><span class="pre">*</span></tt>/<tt class="docutils literal"><span class="pre">&amp;</span></tt> 不要前後都留, 一個就可, 靠左靠右依各人喜好;</li>
<li>預處理指令/命名空間不使用額外縮進, 類/結構體/枚舉/函數/語句使用縮進;</li>
<li>初始化用 <tt class="docutils literal"><span class="pre">=</span></tt> 還是 <tt class="docutils literal"><span class="pre">()</span></tt> 依個人喜好, 統一就好;</li>
<li><tt class="docutils literal"><span class="pre">return</span></tt> 不要加 <tt class="docutils literal"><span class="pre">()</span></tt>;</li>
<li>水平/垂直留白不要濫用, 怎麼易讀怎麼來.</li>
<li>關於 UNIX/Linux 風格為什麼要把左大括號置於行尾 (<tt class="docutils literal"><span class="pre">.cc</span></tt> 檔案的函數實現處, 左大括號位於行首), 我的理解是代碼看上去比較簡約, 想想行首除了函數體被一對大括號封在一起之外, 只有右大括號的代碼看上去確實也舒服; Windows 風格將左大括號置於行首的優點是匹配情況一目瞭然.</li>
</ol>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="comments.html">7. 註釋</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../contents.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="exceptions.html">9. 規則特例</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>